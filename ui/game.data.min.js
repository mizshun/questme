enchant();$(function(){var y={talk:{name:"はなす"},check:{name:"しらべる"},item:{name:"もちもの"}};var z={ill_goku_1:{name:"孫悟空のイラスト1",content:"ui/data/ill_goku_1"},ill_goku_2:{name:"孫悟空のイラスト2",content:"ui/data/ill_goku_2"},ill_local_1:{name:"地域イラスト1",content:"ui/data/ill_local_1"},ill_local_2:{name:"地域イラスト2",content:"ui/data/ill_local_2"},ill_local_3:{name:"地域イラスト3",content:"ui/data/ill_local_3"},ill_car_1:{name:"車のイラスト1",content:"ui/data/ill_car_1"},ill_car_2:{name:"車のイラスト2",content:"ui/data/ill_car_2"},ill_airport_1:{name:"空港のイラスト1",content:"ui/data/ill_airport_1"},ill_airport_2:{name:"空港のイラスト2",content:"ui/data/ill_airport_2"},ill_char_bus:{name:"バスのキャラクター",content:"ui/data/ill_char_bus"},ill_char_wolfman:{name:"狼男のキャラクター",content:"ui/data/ill_char_wolfman"},ill_artist:{name:"ロックアーティストのイラスト",content:"ui/data/ill_artist"},doc_axonometric:{name:"立体感のある家の作成法",content:"ui/data/doc_axonometric"},portfolio:{name:"ポートフォリオ",content:"ui/data/portfolio"}};var w=[{name:"たからばこ",message:[["たからばこをそっとあけてみた。","_"],["なにもない。"]],x:23,y:3,w:32,h:48,frameBlock:0,item:"ill_local_1"},{name:"たからばこ",message:[["こんなとこにもたからばこが。だれが置いたの。","_"],["もう...ない。"]],x:29,y:14,w:32,h:48,frameBlock:0,item:"ill_char_wolfman"},{name:"ツボ",message:[["ツボをのなかをのぞいた。"],["もうツボの中はほこりだけみたい。"]],x:22,y:3,w:32,h:48,frameBlock:1,item:""},{name:"ツボ",message:[["ツボをのなかをのぞいた。"],["ツボの中はほこりだけみたいだ。"]],x:24,y:3,w:32,h:48,frameBlock:1,item:""},{name:"ツボ",message:[["ツボをのなかをのぞいた。"],["ツボの中はほこりだけみたいだ。"]],x:12,y:9,w:32,h:48,frameBlock:1,item:""},{name:"ツボ",message:[["ツボをのなかをのぞいた。"],["ツボの中はほこりだけみたいだ。"]],x:19,y:12,w:32,h:48,frameBlock:1,item:""},{name:"木製のちっちゃい箱",message:[["なかにはなにもない…","と、思ったらなんかある！","_"],["もうちょっと注意深くならなくては(心の声)"]],x:6,y:4,w:32,h:48,frameBlock:2,item:"ill_goku_2"},{name:"木製っぽいちっちゃい箱",message:[["木製っぽいちっちゃい箱をヨコからのぞいてみた。","_","トーンがはがれかけてる。"],["ちっちゃい箱は音をたててくずれた。弁償、かも。"]],x:6,y:9,w:32,h:48,frameBlock:2,item:"ill_car_2"},{name:"本棚",message:[["本棚"],[""]],x:25,y:10,w:32,h:48,frameBlock:3,item:""},{name:"本棚",message:[["本棚をちらりのぞいた。","_"],[""]],x:26,y:10,w:32,h:48,frameBlock:3,item:"doc_axonometric"},{name:"本棚",message:[["本棚をちらりのぞいた。"],["『亜愛一郎の狼狽』大好きな本だ。"]],x:27,y:10,w:32,h:48,frameBlock:3,item:""},{name:"ひきだし1",message:[["_"],["モワレが…"]],x:8,y:3,w:32,h:48,frameBlock:4,item:"ill_artist"},{name:"ひきだし2",message:[["ひきだしをあけてみた。防虫剤のニオイはわりと好きだ。"],["めぼしいものはなにもない。"]],x:10,y:10,w:32,h:48,frameBlock:4,item:""},{name:"たてふだ1",message:[["ようこそ、ポートフォリオの村へ！"],["サイト本編とは異なる、おまけ制作物などをごらんください。"]],x:3,y:5,w:32,h:48,frameBlock:5,item:""},{name:"たてふだ2",message:[["右側の茶色い建物は、じつは図書館のつもりです。"],["どうぞ、おはいりください。"]],x:22,y:9,w:32,h:48,frameBlock:5,item:""},{name:"たてふだ3",message:[["ん？たてふだの後ろになにかが貼ってある。","_"],["はがしたセロハンテープあとが残っている。"]],x:29,y:5,w:32,h:48,frameBlock:5,item:"ill_airport_2"}];var f=[{name:"村人1",message:[["わたしが運転するのはもっぱら軽自動車のアイです。でも、はい、コレ。","_"],["ではでは。ドライブに行ってきます。"]],x:9,y:3,w:32,h:48,frameBlock:1,item:"ill_car_1"},{name:"村人2",message:[["こないだこれ落としてったよ。","_"],["もう、財布とかいえのカギとかなくさないようにね！"]],x:25,y:11,w:32,h:48,frameBlock:2,item:"ill_char_bus"},{name:"村人3",message:[["わたしは番人です。"],["あなたはこれを持っていきますか？"]],x:24,y:4,w:32,h:48,frameBlock:3,item:""},{name:"村人4",message:[["_","ものごころついてから飛行機とか乗ったことないし。"],["行きたいとこは…ある。"]],x:8,y:10,w:32,h:48,frameBlock:1,item:"ill_airport_1"},{name:"村人5",message:[["行ったことないけど沖縄ッていいとこなんだろーなー。","_"],["ハワイもいいな。"]],x:20,y:14,w:32,h:48,frameBlock:2,item:"ill_local_3"},{name:"村人6",message:[["こんにちは。"],["いろんなものを調べたり話してものをもらったら、『もちもの』からみられるよ。"]],x:6,y:7,w:32,h:48,frameBlock:3,item:""},{name:"村人7",message:[["左のくつからベタがはみだしちゃった。","_"],["なおしといてください。"]],x:20,y:1,w:32,h:48,frameBlock:3,item:"ill_goku_1"},{name:"村人8",message:[["きみよりずっとうまくかけるようになったから、これは返すよ。","_","つぎは何のドンブリをかこうか。"],["…かつ丼、中華丼…あ、きみももっとがんばりたまえ。"]],x:10,y:13,w:32,h:48,frameBlock:3,item:"ill_local_2"}];var k=[[[1,1,1,1,32,34,1,1,28,1,1,1,1,1,1,1,99,101,1,1,1,28,28,28,28,28,1,1,1,1],[1,1,1,1,32,34,28,28,1,1,1,1,28,28,1,1,99,101,1,1,1,1,1,1,1,28,28,1,1,1],[1,1,1,1,32,34,1,161,161,161,161,161,1,1,28,1,99,101,1,28,1,161,161,161,161,161,1,1,1,1],[1,1,1,1,32,34,1,161,161,161,161,161,1,28,28,1,99,101,1,28,28,161,161,161,161,161,28,1,1,1],[1,1,1,28,32,34,1,161,161,161,161,161,28,1,83,84,100,100,84,85,1,161,161,161,161,161,28,28,1,1],[1,1,28,1,32,34,1,161,161,161,161,161,1,1,99,16,17,17,18,101,1,161,161,161,161,161,28,28,28,1],[84,84,84,84,96,96,84,84,84,84,84,84,84,84,100,32,96,96,34,100,84,84,84,84,84,84,84,84,84,84],[116,116,116,116,97,97,116,116,116,116,116,116,116,116,100,32,97,97,34,100,116,116,116,100,116,116,116,116,116,116],[28,1,1,28,32,34,1,161,161,161,161,161,1,1,99,48,49,49,50,101,1,1,28,100,28,28,28,1,28,1],[1,1,28,1,32,34,1,161,161,161,161,161,1,1,115,116,100,100,116,117,1,1,1,100,98,98,98,98,98,28],[1,28,1,28,32,34,1,161,161,161,161,161,1,1,28,1,99,101,1,1,1,1,28,100,98,98,98,98,98,1],[1,1,1,1,32,34,1,1,1,1,1,1,1,1,1,28,99,101,161,161,161,161,28,100,98,98,98,98,98,1],[1,1,1,1,32,34,28,28,28,1,28,1,1,0,1,28,99,101,161,161,161,161,28,100,98,98,98,98,98,1],[1,28,1,1,32,34,1,1,1,28,1,1,1,1,1,28,99,101,161,161,161,161,28,100,98,98,98,98,98,1],[28,1,28,1,32,34,1,1,28,1,28,1,1,1,1,28,99,101,161,161,161,161,28,100,98,98,98,98,98,1]],[[94,-1,-1,-1,-1,-1,107,107,-1,-1,-1,-1,-1,-1,-1,107,-1,-1,107,-1,-1,-1,-1,-1,-1,-1,94,94,60,61],[-1,-1,-1,94,-1,-1,-1,-1,-1,94,-1,-1,-1,-1,-1,107,-1,-1,107,-1,-1,-1,-1,-1,-1,-1,-1,94,76,77],[-1,-1,94,-1,-1,-1,-1,7,23,23,23,7,-1,-1,-1,107,-1,-1,107,-1,-1,7,23,23,23,7,-1,-1,60,61],[-1,-1,-1,-1,-1,-1,-1,7,-1,-1,42,7,-1,-1,-1,107,-1,-1,107,-1,-1,7,-1,-1,-1,7,-1,-1,76,77],[60,61,-1,-1,-1,-1,-1,7,-1,-1,41,7,-1,107,-1,-1,-1,-1,-1,-1,107,7,-1,-1,-1,7,-1,-1,-1,-1],[76,77,-1,-1,-1,-1,107,23,23,-1,23,23,107,107,-1,-1,60,61,-1,-1,107,23,23,-1,23,23,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,76,77,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,107,7,23,-1,23,7,107,107,-1,-1,-1,-1,-1,-1,107,107,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,7,-1,107,-1,-1,-1,-1,-1,-1,107,-1,-1,-1,8,24,24,24,8,-1],[-1,-1,-1,-1,-1,-1,-1,7,42,41,42,7,-1,-1,-1,107,-1,-1,107,107,107,-1,-1,-1,24,-1,-1,-1,8,-1],[-1,-1,94,-1,-1,-1,-1,23,23,23,23,23,7,23,7,-1,-1,-1,7,23,23,7,-1,-1,-1,-1,-1,-1,8,-1],[-1,94,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,-1,7,-1,-1,-1,23,-1,42,7,-1,-1,-1,42,41,42,8,-1],[-1,-1,-1,-1,-1,-1,60,61,94,41,42,-1,23,23,23,-1,-1,-1,-1,-1,41,7,-1,-1,8,-1,-1,-1,8,-1],[-1,-1,-1,94,-1,-1,76,77,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,23,-1,42,7,-1,-1,24,24,24,24,24,-1]]];var t=[[1,0,0,0,1,1,1,1,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,1,1,1,1],[0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,1,1],[0,0,1,0,1,1,0,1,1,1,1,1,0,0,0,1,0,0,1,0,0,1,1,1,1,1,0,0,1,1],[0,0,0,0,1,1,0,1,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,1],[1,1,0,0,1,1,0,1,0,0,1,1,0,1,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0],[1,1,0,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,0,0,0,1,0,1,0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,0],[0,0,0,0,1,1,0,1,0,1,0,1,0,0,0,1,0,0,1,1,1,0,0,0,1,0,0,0,1,0],[0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,1,0],[0,1,0,0,1,1,0,0,0,0,0,0,1,0,1,0,0,0,1,0,0,1,0,0,0,0,1,0,1,0],[0,0,0,0,1,1,1,1,1,1,0,0,1,1,1,0,0,0,0,0,1,1,0,0,1,0,0,0,1,0],[0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,1,1,1,1,0]];var C,u,n,r,A,x=[],o,c=[],j,l,i,h;C=new Game(960,480);C.fps=16;C.preload("ui/img/charactor0.png","ui/img/fieldObject0.png","ui/img/map0.png","ui/img/keypanel.png","ui/audio/se_panelopen.mp3","ui/audio/se_getitem.mp3");C.panelStack=[];C.sePanelOpen=Sound.load("ui/audio/se_panelopen.mp3");C.seGetItem=Sound.load("ui/audio/se_getitem.mp3");C.soundControl=false;C.onload=function(){n=new Map(32,32);n.image=C.assets["ui/img/map0.png"];n.loadData(k[0],k[1]);n.collisionData=t;r=new p(32,48,3,6);$.each(f,function(I,H){new B(H)});$.each(w,function(I,H){new s(H)});var F=new Sprite(154,70);var E=new Surface(154,70);E.draw(C.assets["ui/img/keypanel.png"]);F.image=E;F.x=F.y=10;F._element.style.zIndex=9999;u=new Group();u.addChild(n);u.addChild(r);for(var G in c){u.addChild(c[G])}for(var G in x){u.addChild(x[G])}u.addChild(F);C.rootScene.addChild(u);this.keybind(65,"a");this.keybind(83,"b");m();$("#btn-dq-open").toggle(function(){$("#dq-container-wrapperInner").css({webkitTransform:"rotate(0deg)",MozTransform:"rotate(0deg)",msTransform:"rotate(0deg)",transform:"rotate(0deg)",position:"relative",marginTop:"30px"});return false},function(){$("#dq-container-wrapperInner").css({webkitTransform:"rotate(90deg)",MozTransform:"rotate(90deg)",msTransform:"rotate(90deg)",transform:"rotate(90deg)",position:"absolute",marginTop:"-140px"});return false})};C.start();var p=enchant.Class.create(enchant.Sprite,{initialize:function(F,G,E,I){enchant.Sprite.call(this,F,G);var H=new Surface(96,192);H.draw(C.assets["ui/img/charactor0.png"],0,0,96,192,0,0,96,192);this.image=H;this.name="しゅんすけ";this.items={};this.overflow=G-n.tileHeight;this.x=F*E;this.y=(G-this.overflow)*I-this.overflow;this.vx=0;this.vy=0;this.moveSpeed=4;this.dir=0;this.dirStr=["bottom","left","right","up"];this.collision=["","","",""];this.walk=0;this.moving=false;this._style.zIndex=10;this.addEventListener("enterframe",function(){this.frame=this.dir*3+(this.walk%=3);if(!C.panelStack.length){if(this.moving){this.moveBy(this.vx,this.vy);this.walk++;if((this.vx&&this.x%n.tileHeight===0)||(this.vy&&(this.y-16)%n.tileHeight===0)){this.moving=false;this.walk=0}}else{this.vx=this.vy=0;if(C.input.left){this.cueMove("left",arguments)}else{if(C.input.right){this.cueMove("right",arguments)}else{if(C.input.up){this.cueMove("up",arguments)}else{if(C.input.down){this.cueMove("bottom",arguments)}}}}}}})},cueMove:function(G,F){switch(G){case"left":this.dir=1;this["vx"]=-this.moveSpeed;break;case"right":this.dir=2;this["vx"]=this.moveSpeed;break;case"up":this.dir=3;this["vy"]=-this.moveSpeed;break;case"bottom":this.dir=0;this["vy"]=this.moveSpeed;break}for(var H in this.collision){if(this.collision[H]==this.dirStr[this.dir]){return}}if((this.vx||this.vy)){var E=this.x+(this.vx?this.vx/Math.abs(this.vx)*n.tileHeight:0);var I=this.y+(this.vy?this.vy/Math.abs(this.vy)*n.tileHeight:0)+this.overflow;if(0<=E&&E<n.width&&0<=I&&I<n.height&&!n.hitTest(E,I)){this.moving=true;F.callee.call(this)}}}});var B=enchant.Class.create(enchant.Sprite,{initialize:function(E){enchant.Sprite.call(this,E.w,E.h,E.frameBlock);var F=new Surface(96,192);F.draw(C.assets["ui/img/charactor0.png"],E.frameBlock*96,0,96,192,0,0,96,192);this.image=F;this.name=E.name;this.message=E.message;this.messageType="talk";this.item={};this.overflow=E.h-n.tileHeight;this.x=E.w*E.x;this.y=(E.h-this.overflow)*E.y-this.overflow;this.dir=0;this.walk=0;this.collision=false;if(E.item){this.item=new e(E.item)}this.addEventListener("enterframe",function(){if(C.frame%8===0){this.frame=this.dir*3+(this.walk%=3);this.walk++}a(this,r,20);D(this,r,33)});x.push(this)},isFaceToFace:function(){var E=false;if(this.collision=="bottom"&&r.dirStr[r.dir]=="up"||this.collision=="up"&&r.dirStr[r.dir]=="bottom"||this.collision=="left"&&r.dirStr[r.dir]=="right"||this.collision=="right"&&r.dirStr[r.dir]=="left"){E=true}return E},passItem:function(){if(this.item){this.item.passItem()}this.item=null}});var s=enchant.Class.create(enchant.Sprite,{initialize:function(E){enchant.Sprite.call(this,E.w,E.h);this.image=C.assets["ui/img/fieldObject0.png"];this.name=E.name;this.message=E.message;this.messageType="item";this.item={};this.overflow=E.h-n.tileHeight;this.x=E.w*E.x;this.y=(E.h-this.overflow)*E.y-this.overflow;this.frame=E.frameBlock;this.collision=false;if(E.item){this.item=new e(E.item)}this.addEventListener("enterframe",function(){a(this,r,20);D(this,r,33)});c.push(this)},isFaceToFace:function(){var E=false;if(this.collision=="bottom"&&r.dirStr[r.dir]=="up"||this.collision=="up"&&r.dirStr[r.dir]=="bottom"||this.collision=="left"&&r.dirStr[r.dir]=="right"||this.collision=="right"&&r.dirStr[r.dir]=="left"){E=true}return E},passItem:function(){if(this.item){this.item.passItem()}this.item=null}});var e=enchant.Class.create(enchant.Sprite,{initialize:function(E){enchant.Sprite.call(this,0,0);this.name=z[E].name;this.content=z[E].content;this.keyName=E},passItem:function(){r.items[this.keyName]=this;C.soundControl=true}});var b=enchant.Class.create(enchant.Entity,{initialize:function(F,H,E,K,I,J){enchant.Entity.call(this);this.id=J;this.y=K;this.x=E;this._element.style.zIndex=I;var G=$("<ul />").css({width:F,height:H}).addClass("game-panel");$(this._element).prepend(G)}});var v=enchant.Class.create(b,{initialize:function(L,G,K,J,M,I,E){b.call(this,L,G,K,J,M,E);var F=$(this._element).find("ul");$.each(I,function(O,N){var P=$("<li />").html(N.name).data("command_name",O);F.append(P);F.find("li:first").addClass("game-panel-current-select")});if(!F.children().length){var H=$("<li />").html("まだなにもありません");F.append(H)}}});var d=enchant.Class.create(b,{initialize:function(F,G,E,J,H,I){b.call(this,F,G,E,J,H,I);this.$ul=$(this._element).find("ul");this.$li=$("<li />");this.$ul.append(this.$li);this.messageLength=0},getMessage:function(G){var F=$.map(G,function(H,I){return H.collision?H:null});if(!F.length){this.$li.html("しゅんけは遠い目でそらを見上げた。");return}for(var E in F){if(F[E].isFaceToFace()){this.collision=F[E];this.showMessage(this.collision);return}}this.$li.html("目の前は、ただうすぼんやりしているだけだ。")},showMessage:function(E){if(!E){return}this.messageLength=E.message[0].length;this.$li.html(this.createMessage(E));if(this.messageLength){this.$li.addClass("arrow-pager")}else{this.$li.removeClass("arrow-pager")}},createMessage:function(F){var E=F.message[0][0]?F.message[0].shift():F.message[1][0];if(E=="_"){E=F.item.name+"を手に入れた！";F.passItem();return E}if(F.messageType=="talk"){E=F.name+"<br>「"+E+"」"}if(F.messageType=="check"){E=E}return E}});var g=enchant.Class.create({initialize:function(F,J){this.id=J;var I=$('<div id="item-panel"></div>');var H=$('<div id="item-panel-inner"></div>');var G=$('<div id="item-panel-content"></div>');H.append(G);I.append(H);$("body").append(I);var E=z[F]["content"];G.load(E);this.$panel=I},fadeIn:function(){this.$panel.fadeIn("fast").css({display:"table",height:$("body").height()})},fadeOut:function(){this.$panel.fadeOut("fast");$("#item-panel").remove()}});var m=enchant.Class.create({initialize:function(){C.addEventListener("abuttondown",function(){if(!C.panelStack.length){i=new v(110,"auto",775,55,110,y,"commandPanel");u.addChild(i);C.panelStack.push(i);C.sePanelOpen.play()}else{if(C.panelStack[C.panelStack.length-1].id=="commandPanel"){var E=C.panelStack[C.panelStack.length-1];var F=$(E._element).find(".game-panel-current-select").data("command_name");switch(F){case"talk":l=new d(600,180,163,256,100,"messagePanel");u.addChild(l);C.panelStack.push(l);l.getMessage(x);q();break;case"check":l=new d(600,180,163,256,100,"messagePanel");u.addChild(l);C.panelStack.push(l);l.getMessage(c);q();break;case"item":h=new v(130,"auto",791,130,120,r.items,"subCommandPanel");u.addChild(h);C.panelStack.push(h);C.sePanelOpen.play();break;case"profile":window.open("http://localhost/profile/");C.sePanelOpen.play();break}}else{if(C.panelStack[C.panelStack.length-1].id=="messagePanel"){l.showMessage(l.collision);q()}else{if(C.panelStack[C.panelStack.length-1].id=="subCommandPanel"){var E=C.panelStack[C.panelStack.length-1];var F=$(E._element).find(".game-panel-current-select").data("command_name");itemPanel=new g(F,"itemPanel");itemPanel.fadeIn();C.panelStack.push(itemPanel)}}}}});C.addEventListener("bbuttondown",function(){var E=C.panelStack.pop();if(E){u.removeChild(E);C.sePanelOpen.play()}if(E&&E.id=="itemPanel"){itemPanel.fadeOut()}});C.addEventListener("downbuttondown",function(){if(C.panelStack.length){var F=C.panelStack[C.panelStack.length-1];var E=$(F._element).find("li").length;var G=$(F._element).find(".game-panel-current-select").index();if(G<--E){$(F._element).find(".game-panel-current-select").removeClass("game-panel-current-select").next().addClass("game-panel-current-select");C.sePanelOpen.play()}}});C.addEventListener("upbuttondown",function(){if(C.panelStack.length){var E=C.panelStack[C.panelStack.length-1];var F=$(E._element).find(".game-panel-current-select").index();if(F>0){$(E._element).find(".game-panel-current-select").removeClass("game-panel-current-select").prev().addClass("game-panel-current-select");C.sePanelOpen.play()}}})}});function q(){if(!C.soundControl){C.sePanelOpen.play()}if(C.soundControl){C.seGetItem.play();C.soundControl=false}}function D(F,E,G){if((F.x<E.x)&&!E.moving&&F.within(E,G)){E.collision[1]="left";F.collision="right"}else{if((F.x>E.x)&&!E.moving&&F.within(E,G)){E.collision[2]="right";F.collision="left"}}if((F.y>E.y)&&!E.moving&&F.within(E,G)){E.collision[0]="bottom";F.collision="up"}if((F.y<E.y)&&!E.moving&&F.within(E,G)){E.collision[3]="up";F.collision="bottom"}if(!F.within(E,G)&&F.collision=="right"){E.collision[1]="";F.collision=false}if(!F.within(E,G)&&F.collision=="left"){E.collision[2]="";F.collision=false}if(!F.within(E,G)&&F.collision=="up"){E.collision[0]="";F.collision=false}if(!F.within(E,G)&&F.collision=="bottom"){E.collision[3]="";F.collision=false}}function a(G,E,F){if(G.intersect(E)&&E.y<G.y&&!G._style.zIndex){G._style.zIndex=F}else{if(G.intersect(E)&&E.y>G.y&&G._style.zIndex){G._style.zIndex=null}}}});